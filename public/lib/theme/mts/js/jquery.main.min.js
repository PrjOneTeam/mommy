/*** Load FACEBOOK SDK ***/
window.fbAsyncInit = function() {
    FB.init({
        appId: "709973005764664",
        xfbml: !0,
        version: "v2.10"
    }),
    window.location.search.indexOf("fb=1") > -1 && jQuery("#NewUserForm #registerbtn").length && jQuery(".fb-signup").trigger("click")
}
    ,
    function(e, n, t) {
        var i, r = e.getElementsByTagName(n)[0];
        e.getElementById(t) || ((i = e.createElement(n)).id = t,
            i.src = "//connect.facebook.net/en_US/sdk.js",
            r.parentNode.insertBefore(i, r))
    }(document, "script", "facebook-jssdk");
/*** END Load FACEBOOK SDK ***/

/* GENERAL FUNCTIONS */
jQuery(document).ready((function() {
        initNavigation(),
            jQuery(".crsl-items-seasonal").carousel({
                visible: 5,
                itemMinWidth: 170,
                itemMargin: 10
            }),
            jQuery(".crsl-items-home").carousel({
                visible: 5,
                itemMinWidth: 170,
                itemMargin: 10
            }),
            jQuery(".crsl-items").carousel({
                visible: 4,
                itemMinWidth: 150,
                itemMargin: 10
            }),
            initImgGallery(),
            initSocialLink(),
            jQuery("input, textarea").placeholder(),
            initPin(),
            initAccordion(),
            initOptIn(),
            initPostActions(),
            initWorksheetFilter(),
            initSharePage(),
            initSiteRegistration(),
            initFacebook(),
            initPagination(),
            jQuery("#UserPreferences #source").change((function() {
                    var e = jQuery(this).val();
                    jQuery("#form_row_source_other").toggle("Website" == e || "Other" == e)
                }
            )),
            jQuery(".fadeout").delay(5e3).fadeOut("slow"),
            initStore(),
            initTabs(),
            initRating(),
            initTooltip(),
            jQuery(".modal-close,.modal-btn").click((function() {
                    var e = jQuery(this).data("id");
                    document.getElementById(e).style.display = "none"
                }
            ))
    }
));
var current_modal_id = "";
function openSimpleModal(e) {
    document.getElementById(e).style.display = "block",
        current_modal_id = e
}
function initNavigation() {
    jQuery(".search-area").openClose({
        hideOnClickOutside: !0,
        activeClass: "active",
        opener: ".opener",
        slider: ".search-form",
        animSpeed: 400,
        effect: "slide"
    }),
        jQuery("#nav-mobile").html(jQuery("#nav-main").html()),
        jQuery("#nav-trigger span").click((function() {
                jQuery("nav#nav-mobile ul").hasClass("expanded") ? (jQuery("nav#nav-mobile ul.expanded").removeClass("expanded").slideUp(250),
                    jQuery(this).removeClass("open")) : (jQuery("nav#nav-mobile ul").addClass("expanded").slideDown(250),
                    jQuery(this).addClass("open"))
            }
        ))
}
function initAccordion() {
    jQuery("#accordion,.accordion").find(".acc-toggle").click((function() {
            jQuery(this).next().slideToggle("fast"),
                jQuery(".acc-body").not(jQuery(this).next()).slideUp("fast")
        }
    ))
}
function initPin() {
    jQuery(".pibfi_pinterest").each((function(e, t) {
            var i = jQuery(this)
                , r = jQuery(i.find(".xc_pin")[0]);
            r.css("left", 0),
                r.css("display", "block")
        }
    )),
        jQuery(".xc_pin").hover((function(e) {
                jQuery(this).prev().addClass("pibfi_pinterest_hover")
            }
        ), (function(e) {
                jQuery(this).prev().removeClass("pibfi_pinterest_hover")
            }
        )),
        jQuery(".pinterest-image img").after('<div class="hover-pinterest"></div>'),
        jQuery(".hover-pinterest").append('<a class="pin-it-link" target="_blank"></a>'),
        jQuery(".pinterest-image").hover((function() {
                var e = jQuery("img", this).attr("src")
                    , t = encodeURIComponent(e)
                    , i = jQuery(location).attr("href");
                url = encodeURIComponent(i);
                var r = jQuery("img", this).attr("alt");
                r = r.length > 0 ? r : "enter description here";
                var a = encodeURIComponent(r)
                    , o = "http://pinterest.com/pin/create/button/?url=";
                o += url,
                    o += "&media=",
                    o += t,
                    o += "&description=",
                    o += a,
                    jQuery(".hover-pinterest a", this).attr("href", o);
                var n = jQuery(this).width()
                    , s = jQuery(this).height();
                jQuery(".hover-pinterest", this).css("display", "block"),
                    jQuery(".hover-pinterest", this).css("width", n),
                    jQuery(".hover-pinterest", this).css("height", s)
            }
        ), (function() {
                jQuery(".hover-pinterest", this).css("display", "none")
            }
        ))
}
function initSharePage() {
    jQuery("#emailbox-sendForm #submit").click((function() {
            if (jQuery("#req-alert").hide(),
            IsMail(jQuery("#emailbox-sendForm #sender_email").val()) && IsMail(jQuery("#emailbox-sendForm #recipient_email").val())) {
                var e = jQuery("#emailbox-sendForm").serialize();
                jQuery.post("/lib/cfc/blog/general.cfc?method=SharePage", e, (function(e, t, i) {
                        checkBeforeLeaving = !1,
                            jQuery("#emailbox-sendForm").find("input[type=email], textarea").val(""),
                            jQuery(".emailbox-form").hide(),
                            jQuery(".email-sent").show()
                    }
                ))
            } else
                jQuery("#req-alert").show();
            return !1
        }
    )),
        jQuery("#emailbox-sendForm #sender_email, #emailbox-sendForm #recipient_email").focus((function() {
                jQuery("#req-alert").hide()
            }
        )),
        jQuery("#emailBoxLink").click((function() {
                jQuery(".email-sent").hide(),
                    jQuery(".emailbox-form").show()
            }
        ))
}
function pin_this(e, t) {
    jQuery(window).ready((function(i) {
            window.open(t, "pinterest", "screenX=100,screenY=100,height=580,width=730"),
                e.preventDefault(),
                e.stopPropagation()
        }
    ))
}
function initSocialLink() {
    jQuery(".social-link").click((function(e) {
            e.preventDefault();
            var t = jQuery(this).attr("href")
                , i = jQuery(this).attr("title")
                , r = jQuery(this).attr("data-height");
            r || (r = 400),
                window.open(t, i, "height=" + r + ",width=650")
        }
    ))
}
function initImgGallery() {
    var e = 100;
    jQuery(".prev").click((function() {
            var t = jQuery(this).parent().next("ul.gallery").children(":visible")
                , i = jQuery(this).parent().next("ul.gallery").children(":last")
                , r = t.prev();
            r = -1 == r.index() ? i : r,
                jQuery("#thumb_num").html(r.index() + 1),
                t.fadeOut(e, (function() {
                        r.fadeIn(e)
                    }
                ))
        }
    )),
        jQuery(".next").click((function() {
                var t = jQuery(this).parent().next("ul.gallery").children(":visible")
                    , i = jQuery(this).parent().next("ul.gallery").children(":first")
                    , r = t.next();
                r = -1 == r.index() ? i : r,
                    jQuery("#thumb_num").html(r.index() + 1),
                    t.fadeOut(e, (function() {
                            r.fadeIn(e)
                        }
                    ))
            }
        ))
}
function initOptIn() {
    jQuery.each(["1139", "1137", "1136", "1148", "1150"], (function(e, t) {
            var i = this;
            jQuery("#leadBoxOptIn-" + i + " #submit").click((function() {
                    jQuery("#req" + i).hide();
                    var e = IsMail(jQuery("#leadBoxOptIn-" + i + " #email").val())
                        , t = "" != jQuery("#leadBoxOptIn-" + i + " #lead_first_name").val();
                    if (t || e)
                        if (t || t)
                            if (t || e) {
                                jQuery("#leadBoxOptIn-" + i + " #optinfields" + i).hide(),
                                    jQuery("#optloading" + i).html("<i class='ico-spinner'></i> Saving data...").show();
                                var r = jQuery("#leadBoxOptIn-" + i).serialize();
                                jQuery.post("/lib/cfc/cms/optin.cfc?method=Subscribe&returnFormat=JSON", r, (function(e, t, r) {
                                        var a = JSON.parse(e);
                                        a.user_existed ? jQuery("#optloading" + i).html("Good news!<br>Our records indicate you're already signed up.<br><a href='/login?ae=1&email=" + a.email + "'>Click here to login</a>") : (checkBeforeLeaving = !1,
                                            window.location.replace("/thank-you-for-joining-my-teaching-station?e=" + a.emailcrypted))
                                    }
                                ))
                            } else
                                jQuery("#req" + i).html("Please enter a valid email address").show();
                        else
                            jQuery("#req" + i).html("Please enter your first name.").show();
                    else
                        jQuery("#req" + i).html("Please enter your name and a valid email address.").show();
                    return !1
                }
            )),
                jQuery("#leadBoxOptIn-" + i + " #email,#leadBoxOptIn-" + i + " #lead_first_name").focus((function() {
                        jQuery("#req" + i).hide()
                    }
                ))
        }
    ))
}
function IsMail(e) {
    return e.length > 0 && /^[a-z0-9]([a-z0-9_\-\.]*)@([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2})$/i.test(e)
}
function initTooltip() {
    var e = jQuery(".xmTip")
        , t = !1
        , i = !1;
    e.filter((function() {
            return null == jQuery(this).data("tooltip")
        }
    )).each((function() {
            jQuery(this).data("tooltip", jQuery(this).attr("title")).removeAttr("title")
        }
    )),
        e.bind("mouseenter", (function() {
                if (t = jQuery(this),
                    tip = t.data("tooltip"),
                    i = jQuery('<div id="xmtooltip"></div>'),
                !tip || "" == tip)
                    return !1;
                i.css("opacity", 0).html(tip).appendTo("body");
                var e = function() {
                    jQuery(window).width() < 1.5 * i.outerWidth() ? i.css("max-width", jQuery(window).width() / 2) : i.css("max-width", 340);
                    var e = t.offset().left + t.outerWidth() / 2 - i.outerWidth() / 2
                        , r = t.offset().top - i.outerHeight() - 20;
                    if (e < 0 ? (e = t.offset().left + t.outerWidth() / 2 - 20,
                        i.addClass("left")) : i.removeClass("left"),
                        e + i.outerWidth() > jQuery(window).width() ? (e = t.offset().left - i.outerWidth() + t.outerWidth() / 2 + 20,
                            i.addClass("right")) : i.removeClass("right"),
                    r < 0) {
                        r = t.offset().top + t.outerHeight();
                        i.addClass("top")
                    } else
                        i.removeClass("top");
                    i.css({
                        left: e,
                        top: r
                    }).animate({
                        top: "+=10",
                        opacity: 1
                    }, 50)
                };
                e(),
                    jQuery(window).resize(e);
                var r = function() {
                    i.animate({
                        top: "-=10",
                        opacity: 0
                    }, 50, (function() {
                            jQuery(this).remove()
                        }
                    ))
                };
                t.bind("mouseleave", r),
                    i.bind("click", r)
            }
        ))
}
function initRating() {
    jQuery(".rateme").each((function(e, t) {
            var i = jQuery(this)
                , r = i.data("current-rating")
                , a = i.attr("id")
                , o = a.split("-")[0]
                , n = "stars-" + a;
            jQuery("." + n + " .current-rating").find("span").html(r),
                jQuery("." + n + " .clear-rating").on("click", (function(e) {
                        e.preventDefault(),
                            i.barrating("clear")
                    }
                )),
                i.barrating({
                    theme: "fontawesome-stars",
                    showSelectedRating: !1,
                    initialRating: r,
                    onSelect: function(e, t) {
                        jQuery("." + n + " .current-rating").addClass("hidden"),
                            "" == e ? jQuery(".rate" + o).hide() : jQuery(".rate" + o).show()
                    },
                    onClear: function(e, t) {
                        jQuery("." + n).find(".current-rating").removeClass("hidden").end()
                    }
                }),
                jQuery("#" + o + "-rateForm").submit((function() {
                        var e = jQuery("#" + o + "-rateForm").serialize();
                        return jQuery("input[type=submit]", jQuery(this).parents("form")).removeAttr("clicked"),
                            jQuery(this).attr("clicked", "true"),
                            jQuery.post("/lib/cfc/store/product.cfc?method=SubmitReview&returnFormat=JSON", e, (function(e, t, i) {
                                    jQuery("#" + o + "-rateForm").hide(),
                                        jQuery("#" + o + "-thxs").html("Thank you for sharing your experience with this item. You are awesome!").show()
                                }
                            ), "json"),
                            !1
                    }
                ))
        }
    ))
}
function initSiteRegistration() {
    jQuery("#NewUserForm #registerbtn").click((function() {
            return IsMail(jQuery("#NewUserForm #email").val()) ? jQuery("#NewUserForm").submit() : jQuery("#ValidationMessagesNewUserForm").html("Please enter a valid e-mail address.").show(),
                !1
        }
    ))
}
function initFacebook() {
    jQuery(".fb-signup").click((function() {
            "Get Started" == jQuery(this).val() ? jQuery("#NewUserForm").submit() : FB.login((function(e) {
                    SigningWithFB(e)
                }
            ), {
                scope: "public_profile,email"
            })
        }
    )),
        jQuery(".fb-login").click((function() {
                FB.getLoginStatus((function(e) {
                        "connected" == e.status ? FB.api("/me", (function(e) {
                                LoginWithFB(e)
                            }
                        )) : FB.login((function(e) {
                                "connected" == e.status ? FB.api("/me", (function(e) {
                                        LoginWithFB(e)
                                    }
                                )) : window.location = "/join"
                            }
                        ), {
                            scope: "public_profile,email"
                        })
                    }
                ))
            }
        )),
        jQuery(".fb-logout").click((function() {
                FB.getLoginStatus(handleLogoutSessionResponse)
            }
        )),
        jQuery("#DownloadFreeBook,#DownloadFreeSheet").click((function(e) {
                e.preventDefault();
                var t = jQuery(this).attr("data-uuid");
                show_page_lk = !0;
                try {
                    FB.getLoginStatus((function(e) {
                            "connected" == e.status ? FB.api("/me/likes/1573943609513611", (function(e) {
                                    e.data && (isEmpty(e.data) || (show_page_lk = !1)),
                                    show_page_lk && jQuery("#fb-page-lk").show(1e3)
                                }
                            )) : show_page_lk && jQuery("#fb-page-lk").show(1e3)
                        }
                    ))
                } catch (e) {}
                window.location.href = "/pub/article/download.cfm?uuid=" + t
            }
        ))
}
function isEmpty(e) {
    for (var t in e)
        if (e.hasOwnProperty(t))
            return !1;
    return !0
}
function LoginWithFB(e) {
    var t = "";
    e.hasOwnProperty("first_name") && e.hasOwnProperty("email") && (t = "&email=" + encodeURIComponent(e.email) + "&first_name=" + encodeURIComponent(e.first_name) + "&last_name=" + encodeURIComponent(e.last_name)),
        $.ajax({
            type: "get",
            url: "/lib/cfc/social/social.cfc",
            data: "method=LogUser&returnFormat=JSON&network=Facebook&user_id=" + e.id + t,
            success: function(e) {
                window.location = "true" == e ? "/?rload=1" : "/join?fb=1"
            }
        })
}
function handleLogoutSessionResponse(e) {
    e.session ? FB.logout(handleLogoutSessionResponse) : window.location = "/auth.cfm?actionxm=Logout"
}
function revokeAppAuthorization() {
    FB.api("/me/permissions", "DELETE", (function(e) {
            !0 === e || e.error
        }
    ))
}
function SigningWithFB(e) {
    var t = !1;
    "connected" == e.status && FB.api("/me?fields=id,email,name", (function(e) {
            var i = "";
            e.hasOwnProperty("first_name") && e.hasOwnProperty("email") && (i = "&email=" + encodeURIComponent(e.email) + "&first_name=" + encodeURIComponent(e.first_name) + "&last_name=" + encodeURIComponent(e.last_name)),
                $.ajax({
                    type: "get",
                    url: "/lib/cfc/social/social.cfc",
                    data: "method=LogUser&returnFormat=JSON&network=Facebook&user_id=" + e.id + i,
                    success: function(e) {
                        "true" == e ? window.location = "/?rload=1" : t = !0
                    },
                    complete: function(i) {
                        e.hasOwnProperty("email") && t && (jQuery("#initFields").hide(),
                            jQuery("#NewUserForm #form_row_person_name").hide(),
                            jQuery("#NewUserForm #email").val(e.email),
                            jQuery("#NewUserForm #person_name").val(e.name),
                            jQuery("#NewUserForm #fbid").val(e.id),
                            jQuery("#NewUserForm #password").attr("vrequired", "false")),
                            jQuery(".social-signup-options").hide(),
                            jQuery("#NewUserForm #registerbtn").val("Get Started"),
                            jQuery("#NewUserForm #nextFields").show()
                    }
                })
        }
    ))
}
function loadAutoOptInPopup() {
    jQuery("#leadBoxOptInLink").trigger("click"),
        $.ajax({
            type: "get",
            url: "/lib/cfc/cms/optin.cfc",
            data: "method=AddPopupOptinCookie&returnFormat=JSON&web_site_id=66&web_pod_id=1136"
        }),
        $.ajax({
            type: "get",
            url: "/lib/cfc/cms/optin.cfc",
            data: "method=UpdateLeadViews&returnFormat=JSON&web_lead_id=2101621"
        }),
        $.ajax({
            type: "get",
            url: "/lib/cfc/cms/optin.cfc",
            data: "method=UpdateLeadOptinActivity&returnFormat=JSON&site_path=" + jQuery("#leadBoxOptIn-1136 #p").val()
        })
}
function initPostActions() {
    jQuery("#dyn-listing,#post-detail,#article_results").on("click", ".like-post", (function(e) {
            var t = jQuery(this)
                , i = t.attr("data-id")
                , r = t.hasClass("icon-heart") ? t : t.find(".icon-heart")
                , a = t.find(".txt");
            r.removeClass("icon-heart").addClass("small"),
                r.hasClass("ics") ? a.html("Thanks!") : r.html("Thanks!"),
                clearTimeout(r.data("completeToggler"));
            var o = setTimeout((function() {
                    r.removeClass("small").addClass("icon-heart"),
                        r.hasClass("ics") ? a.html("") : r.html("")
                }
            ), 2e3);
            r.data("completeToggler", o),
            i && $.ajax({
                type: "get",
                url: "/lib/cfc/blog/general.cfc",
                data: "method=AddArticleAction&returnFormat=JSON&web_site_id=66&action=Like&web_article_id=" + i
            })
        }
    )),
        jQuery("#dyn-listing,#post-detail").on("click", ".save-post", (function(e) {
                jQuery(this);
                var t = jQuery(this).attr("data-id");
                notif({
                    msg: "Saved to Favorites",
                    type: "success",
                    position: "bottom",
                    timeout: 2e3
                }),
                t && $.ajax({
                    type: "get",
                    url: "/lib/cfc/blog/general.cfc",
                    data: "method=AddArticleAction&returnFormat=JSON&web_site_id=66&action=Like&web_article_id=" + t
                })
            }
        )),
        jQuery(".post-listing-view").click((function() {
                var e = jQuery(this).attr("data-id")
                    , t = "landscape" != e;
                jQuery("#view_portrait").toggle(t),
                    jQuery("#view_landscape").toggle(!t),
                    t ? (jQuery(".post-listing-view.box").addClass("active"),
                        jQuery(".post-listing-view.list").removeClass("active")) : (jQuery(".post-listing-view.list").addClass("active"),
                        jQuery(".post-listing-view.box").removeClass("active")),
                    $.ajax({
                        type: "get",
                        url: "/lib/theme/mts/xm.cfc",
                        data: "method=UpdateListViewPreference&returnFormat=JSON&option=" + e
                    })
            }
        ))
}
function initWorksheetFilter() {
    jQuery("#search-filter a").click((function(e) {
            e.stopImmediatePropagation(),
                showWSLoading();
            var t = jQuery(this).next()
                , i = jQuery(this).closest("li").hasClass("ck-active")
                , r = jQuery(this).attr("data-id")
                , a = 148 == r;
            jQuery(this).closest("ul").find("li").each((function() {
                    jQuery(this).removeClass("ck-active")
                }
            )),
            i || jQuery(this).closest("li").addClass("ck-active"),
            t.is("ul") && t.is(":visible") && (jQuery(this).closest("li").removeClass("ck-active"),
                t.slideUp("normal")),
            t.is("ul") && !t.is(":visible") && (jQuery("#search-filter .expand:visible").slideUp("normal"),
                t.slideDown("normal"));
            var o = jQuery(this).attr("href")
                , n = "1" == getUrlParameter(o, "f") ? 1 : 0
                , s = getUrlParameter(o, "p")
                , l = "" != (l = getUrlParameter(o, "k")) ? decodeURIComponent(l) : ""
                , u = jQuery.isNumeric(s) && s >= 1 && s <= 1e3 ? s : 1;
            if (a) {
                var c = jQuery(this).data("current-state");
                n = "off" == c ? 1 : 0;
                var d = "off" == c ? "on" : "off";
                jQuery(this).data("current-state", d)
            }
            return o = removeURLParams(o),
            a || (jQuery(".clear-results").hide(),
                jQuery("#worksheetSearchFrm #k").val("")),
                getWorksheetSearchResults(url_path = o, category_id = r, n = n, u = u, l = l, tag = ""),
                !1
        }
    )),
        jQuery("#dyn-listing").on("click", ".pagination a", (function(e) {
                e.stopImmediatePropagation(),
                    showWSLoading();
                var t = jQuery(this).attr("href")
                    , i = "1" == getUrlParameter(t, "f") ? 1 : 0
                    , r = getUrlParameter(t, "p")
                    , a = getUrlParameter(t, "tag")
                    , o = "" != (o = getUrlParameter(t, "k")) ? decodeURIComponent(o) : ""
                    , n = jQuery.isNumeric(r) && r >= 1 && r <= 1e3 ? r : 1
                    , s = jQuery(this).data("id");
                return t = removeURLParams(t),
                    getWorksheetSearchResults(url_path = t, category_id = s, i = i, n = n, o = o, a = a),
                    !1
            }
        )),
        jQuery("#worksheetSearchFrm").submit((function() {
                showWSLoading();
                var e = window.location.pathname + "?" + window.location.search.substr(1);
                getUrlParameter(e, "f"),
                    jQuery("#worksheetSearchFrm #c").val();
                e = window.location.pathname;
                var t = jQuery("#worksheetSearchFrm #k").val();
                return getWorksheetSearchResults(url_path = "/worksheets", category_id = 0, 0, current_page = 1, t = t, tag = ""),
                    jQuery(".filter-group a").each((function(e, t) {
                            var i = jQuery(this)
                                , r = i.closest("li");
                            checkElement = i.next(),
                                category_id = i.data("id"),
                            r.hasClass("ck-active") && r.removeClass("ck-active"),
                            checkElement.is("ul") && checkElement.is(":visible") && (jQuery(this).closest("li").removeClass("ck-active"),
                                checkElement.slideUp("normal")),
                            148 == category_id && i.data("current-state", "off")
                        }
                    )),
                    jQuery(".clear-results").show(),
                    !1
            }
        )),
        jQuery(".clear-results").click((function() {
                jQuery(this).hide(),
                    jQuery("#worksheetSearchFrm #k").val(""),
                    getWorksheetSearchResults(url_path = "/worksheets", category_id = 0, is_free = 0, current_page = 1, keyword = "", tag = "")
            }
        )),
        jQuery("#filter-open").on("click", (function() {
                jQuery("#filter-slider").toggleClass("open"),
                    jQuery(".open-slide").hasClass("open") ? jQuery(this).html("OPEN &nbsp; FILTER") : jQuery(this).html("CLOSE &nbsp; FILTER"),
                    jQuery(".open-slide").toggleClass("open")
            }
        ))
}
function getWorksheetSearchResults(e, t, i, r, a, o) {
    var n = 1 == i ? "?f=1" : "";
    jQuery("#worksheetSearchFrm #c").val(t),
        jQuery.getJSON("/lib/theme/mts/xm.cfc?method=GetArticleList&returnFormat=JSON&queryFormat=column&url_path=" + e + "&category_id=" + t + "&free=" + i + "&page=" + r + "&keyword=" + a + "&tag=" + o, {}, (function(t) {
                jQuery(".filter-group a").each((function(e, i) {
                        var r = jQuery(this)
                            , o = r.hasClass("fp")
                            , s = r.closest("ul").hasClass("expand")
                            , l = r.data("path")
                            , u = r.data("id")
                            , c = r.closest("ul").attr("id")
                            , d = t.filter_data.resource_path;
                        if (s && (c = "subject"),
                            "grade" == c && l != t.filter_data.grade_path ? d = d.concat(l) : "grade" != c && t.filter_data.grade_path.length > 0 && (d = d.concat(t.filter_data.grade_path)),
                            "subject" == c ? o && l != t.filter_data.subject_parent_path && l != t.filter_data.subject_path ? d = d.concat(l) : s && (d = t.filter_data.subject_path.length > 0 && t.filter_data.subject_path == l ? d.concat(t.filter_data.subject_parent_path) : d.concat(l)) : "subject" != c && t.filter_data.subject_path.length > 0 && (d = d.concat(t.filter_data.subject_path)),
                        148 == u) {
                            var h = d
                                , m = n;
                            m.length > 0 && a.length > 0 ? m = m.concat("&k=" + encodeURIComponent(a)) : a.length > 0 && (m = "?k=" + encodeURIComponent(a)),
                            m.length > 0 && (h = h.concat(m)),
                                r.data("path", h),
                                r.attr("href", h)
                        } else
                            n.length > 0 && (d = d.concat(n)),
                                r.attr("href", d)
                    }
                )),
                    jQuery(".ploading").hide(),
                    jQuery("#dyn-listing").removeClass("faded"),
                    n.length > 0 && 1 != r ? n = n.concat("&p=" + r) : 1 != r && (n = "?p=" + r),
                    n.length > 0 && a.length > 0 ? n = n.concat("&k=" + encodeURIComponent(a)) : a.length > 0 && (n = "?k=" + encodeURIComponent(a)),
                n.length > 0 && (e = e.concat(n)),
                    document.getElementById("article_results").innerHTML = t.html,
                    document.title = t.page_title;
                var i = 0 == t.total_rows;
                jQuery("#no_records").toggle(i),
                    jQuery(".has_records").toggle(!i),
                    jQuery("#pagination_title").html(t.pagination_title),
                    jQuery(".article_paging").html(t.pagination_dsp),
                    jQuery(".hpage").html(t.page_title),
                    jQuery("meta[name=description]").remove(),
                    jQuery("head").append('<meta name="description" content="' + t.meta_description + '">'),
                    window.history.pushState({
                        html: t.html,
                        pageTitle: t.page_title
                    }, "", e),
                    jQuery("html, body").animate({
                        scrollTop: 0
                    }, "slow")
            }
        ))
}
function removeURLParams(e) {
    var t = e
        , i = 0
        , r = t;
    return -1 == (i = t.indexOf("?")) && (i = t.indexOf("#")),
    -1 != i && (r = t.substring(0, i)),
        r
}
window.onclick = function(e) {
    if (current_modal_id.length > 0) {
        var t = document.getElementById(current_modal_id);
        e.target == t && (t.style.display = "none")
    }
}
;
var getUrlParameter = function(e, t) {
    var i, r, a = e.substring(e.lastIndexOf("?") + 1).split("&");
    for (r = 0; r < a.length; r++)
        if ((i = a[r].split("="))[0] === t)
            return void 0 === i[1] || i[1];
    return ""
};
function showWSLoading() {
    jQuery(".ploading").show(),
        jQuery("#dyn-listing").addClass("faded")
}
function EnterWorksheetData(e) {
    var t = document.forms.ChooseTp;
    t.template.value = e,
        t.submit()
}
function toggle(e, t) {
    var i = document.getElementById(e);
    if (i) {
        var r = void 0 !== t ? t : "none" == i.style.display;
        if ("tr" == i.tagName.toLowerCase())
            return void toggleTableRow(e, r);
        i.style.display = r ? "block" : "none"
    }
}
function toggleTableRow(e, t) {
    var i = document.getElementById(e)
        , r = navigator.appName.indexOf("Microsoft") > -1 ? "block" : "table-row";
    if (i) {
        if ("tr" != i.tagName.toLowerCase())
            return;
        i.style.display = t ? r : "none"
    }
}
function initStore() {
    jQuery("#getoffer").click((function(e) {
            jQuery("#offer-option").show(),
                jQuery("#getoffer").hide()
        }
    )),
        jQuery(".attr-selected").change((function() {
                jQuery("#add-to-cart").addClass("disableclick");
                var $this = jQuery(this)
                    , is_single = $this.hasClass("single-wk");
                checkBeforeLeaving = !1,
                    jQuery.ajax({
                        url: "/lib/cfc/store/cart.cfc?method=GetSkuIDBasedOnAttributes&returnFormat=JSON",
                        method: "post",
                        data: jQuery("#AddBasket").serialize()
                    }).done((function(response) {
                            var o = eval("(" + response + ")");
                            if (o.opt_skuid && o.opt_skuid > 0)
                                jQuery("#skuID").val(o.opt_skuid),
                                    jQuery("#reg-price-txt").html("$" + o.opt_retail_price.toFixed(2)),
                                    jQuery("#sale-price-txt").html("$" + o.opt_price.toFixed(2)),
                                "" != o.attribute_photo_name && jQuery("#dsp-item-photo").attr("src", "/vault/2599/store/med/" + o.attribute_photo_name);
                            else if (is_single) {
                                var color_selected = $this.val()
                                    , single_img = "printable-learning-the-alphabet-single-letter-workbook.jpg";
                                "Black and White" == color_selected && (single_img = "printable-learning-the-alphabet-single-letter-workbook-bw.jpg"),
                                    jQuery("#dsp-item-photo").attr("src", "/vault/2599/store/med/" + single_img)
                            }
                            jQuery("#add-to-cart").removeClass("disableclick")
                        }
                    )).fail((function() {
                            jQuery("#skuID").val("")
                        }
                    ))
            }
        )),
        jQuery(".remove-item").click((function(e) {
                checkBeforeLeaving = !1,
                    e.preventDefault();
                var t = jQuery(this).attr("data-uuid")
                    , i = jQuery(this).attr("data-id");
                jQuery.ajax({
                    type: "get",
                    url: "/lib/cfc/store/cart.cfc",
                    data: "method=DeleteCartItem&returnFormat=JSON&cart_UUID=" + t + "&sc_cart_item_id=" + i,
                    complete: function(e) {
                        window.location = "/cart"
                    }
                })
            }
        )),
        jQuery(".store-login,.store-login-return").click((function(e) {
                jQuery("#payment-tabs").toggle(),
                    jQuery("#SignInForm").toggle(),
                    jQuery(".login-prompt").toggle(),
                    jQuery(".checkout-prompt").toggle()
            }
        )),
        jQuery(".toggleDiv").click((function(e) {
                var t = jQuery(this).data("divid");
                jQuery("#" + t).toggle("fast")
            }
        )),
        jQuery("#add-to-cart").click((function() {
                "" == jQuery("#skuID").val() || jQuery("#add-to-cart").hasClass("disableclick") ? jQuery.ajax({
                    url: "/lib/cfc/store/cart.cfc?method=GetSkuIDBasedOnAttributes&returnFormat=JSON",
                    method: "post",
                    data: jQuery("#AddBasket").serialize()
                }).done((function(response) {
                        var o = eval("(" + response + ")");
                        jQuery("#skuID").val(o.opt_skuid),
                            jQuery("#AddBasket").submit()
                    }
                )).fail((function() {
                        jQuery("#skuID").val("")
                    }
                )) : jQuery("#AddBasket").submit()
            }
        )),
        jQuery("#sales-letter .selectdd").change((function() {
                var e = jQuery(this)
                    , t = e.attr("id")
                    , i = jQuery("#" + t + " option:selected").text()
                    , r = e.data("photo");
                "Black and White" == i ? r += "-bw" : i.indexOf("Both Versions") >= 0 && (r += "-color-and-bw"),
                    jQuery("#" + t + "Photo").attr("src", "/vault/2599/store/thumb/" + r + ".jpg")
            }
        )),
        jQuery(".sales-letter-add-to-cart").click((function() {
                var e = jQuery(this).data("selectbox")
                    , t = jQuery("#" + e).val();
                "" != t && (window.location.href = "/cart?actionxm=Buy&s=" + t)
            }
        )),
        jQuery("#CheckoutForm #billing_country").change((function() {
                "USA" == jQuery(this).val() ? (jQuery("#form_row_billing_state").show(),
                    jQuery("#form_row_billing_state_other").hide(),
                    jQuery("#CheckoutForm #billing_state").attr("vrequired", "true"),
                    jQuery("#CheckoutForm #billing_state_other").attr("vrequired", "false")) : (jQuery("#form_row_billing_state_other").show(),
                    jQuery("#form_row_billing_state").hide(),
                    jQuery("#CheckoutForm #billing_state").attr("vrequired", "false"),
                    jQuery("#CheckoutForm #billing_state_other").attr("vrequired", "true"))
            }
        )),
        jQuery("#CheckoutForm #btnaction").click((function() {
                var e = jQuery("#CheckoutForm #email").val()
                    , t = jQuery("#CheckoutForm #email_confirm").val();
                return IsMail(e) ? e != t ? (alert("[Confirm Email] does not match [Email] field."),
                    !1) : void 0 : (alert("Please enter a valid email address."),
                    !1)
            }
        )),
        jQuery("#POForm #btnaction").click((function() {
                var e = jQuery("#POForm #billing_email").val()
                    , t = jQuery("#POForm #billing_email_confirm").val();
                return IsMail(e) ? e != t ? (alert("[Billing Confirm Email] does not match [Billing Email] field."),
                    !1) : void 0 : (alert("Please enter a valid email address for the billing contact."),
                    !1)
            }
        ))
}
function showCheckoutLoad() {
    jQuery("#checkout-wrapper").hide(),
        jQuery("#checkout-sidebar").hide(),
        window.scrollTo(0, 0),
        jQuery("#processmsg").show()
}
function initPagination() {
    pageSize = 100,
        showPage = function(e) {
            jQuery(".pgitem").hide(),
                jQuery(".pgitem").each((function(t) {
                        t >= pageSize * (e - 1) && t < pageSize * e && jQuery(this).show()
                    }
                ))
        }
        ,
        showPage(1),
        jQuery("#pagin li a").click((function() {
                jQuery("#pagin li a").removeClass("active"),
                    jQuery(this).addClass("active"),
                    showPage(parseInt(jQuery(this).text()))
            }
        ))
}
function initTabs() {
    jQuery("ul.tabs").each((function() {
            var e, t, i = jQuery(this).find("a");
            (e = jQuery(i.filter('[href="' + location.hash + '"]')[0] || i[0])).closest("li").addClass("active"),
                e.addClass("active"),
                t = jQuery(e[0].hash),
                i.not(e).each((function() {
                        jQuery(this.hash).hide()
                    }
                )),
                jQuery(this).on("click", "a", (function(i) {
                        e.removeClass("active"),
                            e.closest("li").removeClass("active"),
                            t.hide(),
                            e = jQuery(this),
                            t = jQuery(this.hash),
                            e.addClass("active"),
                            e.closest("li").addClass("active"),
                            t.show(),
                            i.preventDefault()
                    }
                )),
            jQuery(this).hasClass("showreview") && (jQuery(".reviewtab").trigger("click"),
                jQuery("#review-btn").trigger("click"))
        }
    ))
}
/* END GENERAL FUNCTIONS */

/* XM FORM VALIDATION */
var xmFormObj = {}
    , checkRequiredFields = !0
    , error_color = "#fffbec"
    , off_error_color = "#FFFFFF"
    , on_error_color = "#fffbec"
    , ItemsChecked = new Object
    , frmStr = new Object;
function frmValidCheck(e) {
    ItemsChecked = new Object;
    var t = e.elements.length;
    if (checkBeforeLeaving = !1,
    "Delete" == jQuery("input[type=submit][clicked=true]").val() && e.setAttribute("validate", "false"),
    "false" == e.getAttribute("validate"))
        return !0;
    var r, a, n, i, d, l, m, o = new Array;
    if ("undefined" != typeof CKEDITOR)
        for (instance in CKEDITOR.instances)
            CKEDITOR.instances[instance].updateElement();
    for (var s = 0; s < t; s++)
        if (i = (d = e.elements[s]).getAttribute("vrequired"),
            n = d.getAttribute("vtype"),
            l = d.getAttribute("vReg"),
        null != n && "numeric" == n.toLowerCase() && (d.value = d.value.replace(/,/g, "")),
            m = void 0 !== frmStr[n] ? frmStr[n].regex : l,
            r = r = void 0 !== frmStr[n] ? frmStr[n].message : d.getAttribute("vMsg"),
            a = "",
        !checkRequiredFields || "1" != i && "true" != i && 1 != i || "" == d.name || (a = frmValidRequired(e, d, frmStr.reqMsg)),
        null != m && "" == a && "" != d.name && (a = frmValidOther(e, d, m, r)),
        "TEXTAREA" == d.tagName && null != d.getAttribute("maxlength") && !isNaN(d.getAttribute("maxlength")) && parseInt(d.getAttribute("maxlength")) > 0 && d.value.length > parseInt(d.getAttribute("maxlength")) && (a = "You can only enter up to " + d.getAttribute("maxlength") + " characters in the field " + d.getAttribute("vlabel")),
        "" != a) {
            var f = o.length;
            o[f] = new Object,
                o[f].message = a,
                o[f].field = d.name
        }
    if (o.length > 0) {
        for (var c = '<div class="invalidFieldHeader"><i class="icon-warning"></i>We didn\'t correctly capture your response to the following item(s).', g = 0; g < o.length; g++)
            c += '<div class="invalidFieldMessage" onclick="frmNavigate(\'' + o[g].field + "');\">" + decodeURIComponent(o[g].message) + "</div>";
        c += "</div>";
        var u = document.getElementById("ValidationMessages")
            , v = e.getAttribute("id");
        if (document.getElementById("ValidationMessages" + v) && (u = document.getElementById("ValidationMessages" + v)),
            u)
            u.innerHTML = c,
                u.style.display = "block";
        else {
            jQuery(".invalidFieldMessageUnder").remove();
            for (g = 0; g < o.length; g++)
                jQuery("#" + o[g].field).after('<div class="invalidFieldMessageUnder">' + decodeURIComponent(o[g].message) + "</div>")
        }
        return !1
    }
    return "function" != typeof postValidateForm || postValidateForm(e)
}
function frmValidOther(frmObj, fldObj, expChk, msg) {
    var msg_addition = ""
        , objRegExp = eval(expChk);
    return form_field_value = trimAll(fldObj.value),
    "" == form_field_value || objRegExp.test(form_field_value) || (msg_addition = unescape(fldObj.getAttribute("vlabel")) + " " + msg,
        changeColor(frmObj, fldObj, 1)),
        msg_addition
}
function frmValidRequired(e, t, r) {
    changeColor(e, t, 0);
    var a = t.getAttribute("type")
        , n = "";
    if ("radio" != a && "checkbox" != a || null == ItemsChecked || void 0 !== ItemsChecked[t.name]) {
        var i = t.value;
        0 == (i = trimAll(i)).length && (n = t.getAttribute("vlabel") + " " + r,
            changeColor(e, t, 1))
    } else {
        var d = !1;
        void 0 === e.elements[t.name].length && (d = e.elements[t.name].checked);
        for (var l = 0; l < e.elements[t.name].length; l++)
            if (inst = e.elements[t.name][l],
                inst.checked) {
                d = !0;
                break
            }
        d || (n = e.elements[t.name].length ? e.elements[t.name][0].getAttribute("vlabel") + " " + r : e.elements[t.name].getAttribute("vlabel") + " " + r)
    }
    return ItemsChecked[t.name] = !0,
        n
}
function frmValidRange(frmObj, fldObj, msg) {
    changeColor(frmObj, fldObj, 0);
    var form_field_range = fldObj.getAttribute("range")
        , msg_addition = "";
    if (form_field_range && fldObj.value.length > 0) {
        if (form_field_range.indexOf(",") > -1)
            var rng = form_field_range.split(",");
        else if (form_field_range.indexOf("-") > -1)
            var rng = form_field_range.split("-");
        var val_1 = rng[0]
            , val_2 = "null" == rng[1] ? "" : rng[1];
        rng[0].indexOf(".value") > -1 && (val_1 = eval(rng[0])),
        rng[1].indexOf(".value") > -1 && (val_2 = eval(rng[1]));
        var form_field_value = fldObj.value;
        (val_1 > form_field_value || val_2.length > 2 && val_2 < form_field_value) && (msg_addition = msg,
            changeColor(frmObj, fldObj, 1))
    }
    return msg_addition
}
function changeColor(e, t, r) {
    t.style.backgroundColor = 1 == r ? error_color : off_error_color
}
function trimAll(e) {
    var t = /^(\s*)$/;
    return t.test(e) && 0 == (e = e.replace(t, "")).length ? e : ((t = /^(\s*)([\W\w]*)(\b\s*$)/).test(e) && (e = e.replace(t, "$2")),
        e)
}
function frmNavigate(e) {
    var t = document.getElementById("form_row_" + e)
        , r = document.getElementById(e);
    t ? (document.body.scrollTop = getObjectPosition(t).y,
    t.focus && t.focus()) : r.focus && r.focus()
}
function setRequiredField(e, t) {
    if (e && e.length && e[0].name) {
        try {
            (a = document.getElementById("ReqImg" + e[0].name)) && (a.src = t ? "/lib/img/icon/asterisk.gif" : "/lib/img/clear.gif")
        } catch (e) {}
        try {
            for (var r = 0; r < e.length; r++)
                e[r].setAttribute("vrequired", t)
        } catch (e) {}
    } else {
        try {
            var a;
            (a = document.getElementById("ReqImg" + e.name)) && (a.src = t ? "/lib/img/icon/asterisk.gif" : "/lib/img/clear.gif")
        } catch (e) {}
        try {
            e.setAttribute("vrequired", t)
        } catch (e) {}
    }
}
function addEvent(e, t, r, a) {
    e && $(e).on(t, r)
}
frmStr.reqMsg = "is required",
    frmStr.numeric = new Object,
    frmStr.numeric.message = "must be a numeric value",
    frmStr.numeric.regex = /(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,
    frmStr.integer = new Object,
    frmStr.integer.message = "must be a valid number (greater than 0)",
    frmStr.integer.regex = /(^-?\d\d*$)/,
    frmStr.phone = new Object,
    frmStr.phone.message = "must be a valid phone number (xxx-xxx-xxxx)",
    frmStr.phone.regex = /^(\d\d\d-)*\d\d\d-\d\d\d\d$/,
    frmStr.fein = new Object,
    frmStr.fein.message = "must be a valid federal employer identification number (xx-xxxxxxx)",
    frmStr.fein.regex = /^(\d\d-)*\d\d\d\d\d\d\d$/,
    frmStr.ssn = new Object,
    frmStr.ssn.message = "must be a valid social security number (xxx-xx-xxxx)",
    frmStr.ssn.regex = /^\d\d\d-\d\d-\d\d\d\d$/,
    frmStr.date = new Object,
    frmStr.date.message = "must be a valid date",
    frmStr.date.regex = /^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/,
    frmStr.datetime = new Object,
    frmStr.datetime.message = "must be a valid date",
    frmStr.datetime.regex = /(?=\d)^(?:(?!(?:10\D(?:0?[5-9]|1[0-4])\D(?:1582))|(?:0?9\D(?:0?[3-9]|1[0-3])\D(?:1752)))((?:0?[13578]|1[02])|(?:0?[469]|11)(?!\/31)(?!-31)(?!\.31)|(?:0?2(?=.?(?:(?:29.(?!000[04]|(?:(?:1[^0-6]|[2468][^048]|[3579][^26])00))(?:(?:(?:\d\d)(?:[02468][048]|[13579][26])(?!\x20BC))|(?:00(?:42|3[0369]|2[147]|1[258]|09)\x20BC))))))|(?:0?2(?=.(?:(?:\d\D)|(?:[01]\d)|(?:2[0-8])))))([-.\/])(0?[1-9]|[12]\d|3[01])\2(?!0000)((?=(?:00(?:4[0-5]|[0-3]?\d)\x20BC)|(?:\d{4}(?!\x20BC)))\d{4}(?:\x20BC)?)(?:$|(?=\x20\d)\x20))?((?:(?:0?[1-9]|1[012])(?::[0-5]\d){0,2}(?:\x20[aApP][mM]))|(?:[01]\d|2[0-3])(?::[0-5]\d){1,2})?$/,
    frmStr.time = new Object,
    frmStr.time.message = "must be a valid time",
    frmStr.time.regex = /^([1-9]|1[0-2]):[0-5]\d(:[0-5]\d(\.\d{1,3})?)?$/,
    frmStr.currency = new Object,
    frmStr.currency.message = "must be a valid currency",
    frmStr.currency.regex = /(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,
    frmStr.email = new Object,
    frmStr.email.message = "must be a valid email (user@company.com)",
    frmStr.email.regex = /^[a-z0-9]([a-z0-9_\-\.]*)@([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2})$/i,
    frmStr.date = new Object,
    frmStr.date.message = "must be a date",
    frmStr.date.regex = /^\d{1,2}(\-|\/|\.)\d{1,2}\1\d{4}$/,
    addEvent(window, "load", function(e) {
        globalXMOnload()
    });
var tooltip = null
    , pageLoaded = !1;
function globalXMOnload() {
    window.self !== window.top && (document.documentElement.className += " framed",
        jQuery(window).on("load resize", function(e) {
            if (parent.postMessage) {
                var t = {
                    height: jQuery("body").height(),
                    path: location.href
                };
                parent.postMessage(JSON.stringify(t), "*")
            }
        }).resize());
    var e = document.createElement("DIV");
    e.id = "XMBubble",
        e.className = "XMBubble",
        document.body.appendChild(e),
        jQuery(".xmPopOverRemote").click(function() {
            var e = jQuery(this);
            $.get(e.data("remote"), function(t) {
                e.popover({
                    html: !0,
                    placement: "auto right",
                    container: "body",
                    trigger: "focus",
                    content: t
                }).popover("show")
            }),
                jQuery(document).on("click", function(e) {
                    var t = jQuery(e.target);
                    jQuery(".popover").find(t).length > 0 ? e.stopPropagation() : jQuery(".popover:visible").each(function() {
                        jQuery(this).popover("hide")
                    })
                })
        }),
        jQuery(".xmModalFrame").click(function() {
            var e = jQuery(this);
            eModal.setModalOptions({
                backdrop: "static",
                keyboard: !1
            }),
                eModal.iframe(e.data("remote"), e.data("title"))
        }),
        jQuery(".xmRemoteTip").click(function() {
            jQuery(this).popover({
                html: !0,
                placement: "auto right",
                container: "body",
                trigger: "focus",
                content: function() {
                    var e = jQuery(this);
                    return jQuery('<iframe height="' + e.data("height") + '" width="' + e.data("width") + '" frameborder="0" border="0"></iframe>').attr("src", jQuery(this).data("remote"))
                }
            }).popover("show")
        }),
        pageLoaded = !0
}
/* END XM FORM VALIDATION */

/* jQuery Open/Close plugin */
!function(e) {
    function t(t) {
        this.options = e.extend({
            addClassBeforeAnimation: !0,
            hideOnClickOutside: !1,
            activeClass: "active",
            opener: ".opener",
            slider: ".slide",
            animSpeed: 400,
            effect: "fade",
            event: "click"
        }, t),
            this.init()
    }
    t.prototype = {
        init: function() {
            this.options.holder && (this.findElements(),
                this.attachEvents(),
                this.makeCallback("onInit", this))
        },
        findElements: function() {
            this.holder = jQuery(this.options.holder),
                this.opener = this.holder.find(this.options.opener),
                this.slider = this.holder.find(this.options.slider)
        },
        attachEvents: function() {
            var e = this;
            this.eventHandler = function(t) {
                t.preventDefault(),
                    e.slider.hasClass(i) ? e.showSlide() : e.hideSlide()
            }
                ,
                e.opener.bind(e.options.event, this.eventHandler),
            "over" === e.options.event && (e.opener.bind("mouseenter", function() {
                e.showSlide()
            }),
                e.holder.bind("mouseleave", function() {
                    e.hideSlide()
                })),
                e.outsideClickHandler = function(t) {
                    if (e.options.hideOnClickOutside) {
                        var i = jQuery(t.target);
                        i.is(e.holder) || i.closest(e.holder).length || e.hideSlide()
                    }
                }
                ,
                this.holder.hasClass(this.options.activeClass) ? jQuery(document).bind("click touchstart", e.outsideClickHandler) : this.slider.addClass(i)
        },
        showSlide: function() {
            var e = this;
            e.options.addClassBeforeAnimation && e.holder.addClass(e.options.activeClass),
                e.slider.removeClass(i),
                jQuery(document).bind("click touchstart", e.outsideClickHandler),
                e.makeCallback("animStart", !0),
                s[e.options.effect].show({
                    box: e.slider,
                    speed: e.options.animSpeed,
                    complete: function() {
                        e.options.addClassBeforeAnimation || e.holder.addClass(e.options.activeClass),
                            e.makeCallback("animEnd", !0)
                    }
                })
        },
        hideSlide: function() {
            var e = this;
            e.options.addClassBeforeAnimation && e.holder.removeClass(e.options.activeClass),
                jQuery(document).unbind("click touchstart", e.outsideClickHandler),
                e.makeCallback("animStart", !1),
                s[e.options.effect].hide({
                    box: e.slider,
                    speed: e.options.animSpeed,
                    complete: function() {
                        e.options.addClassBeforeAnimation || e.holder.removeClass(e.options.activeClass),
                            e.slider.addClass(i),
                            e.makeCallback("animEnd", !1)
                    }
                })
        },
        destroy: function() {
            this.slider.removeClass(i).css({
                display: ""
            }),
                this.opener.unbind(this.options.event, this.eventHandler),
                this.holder.removeClass(this.options.activeClass).removeData("OpenClose"),
                jQuery(document).unbind("click touchstart", this.outsideClickHandler)
        },
        makeCallback: function(e) {
            if ("function" == typeof this.options[e]) {
                var t = Array.prototype.slice.call(arguments);
                t.shift(),
                    this.options[e].apply(this, t)
            }
        }
    };
    var i = "js-slide-hidden";
    !function() {
        var e = jQuery('<style type="text/css">')[0]
            , t = "." + i;
        t += "{position:absolute !important;left:-9999px !important;top:-9999px !important;display:block !important}",
            e.styleSheet ? e.styleSheet.cssText = t : e.appendChild(document.createTextNode(t)),
            jQuery("head").append(e)
    }();
    var s = {
        slide: {
            show: function(e) {
                e.box.stop(!0).hide().slideDown(e.speed, e.complete)
            },
            hide: function(e) {
                e.box.stop(!0).slideUp(e.speed, e.complete)
            }
        },
        fade: {
            show: function(e) {
                e.box.stop(!0).hide().fadeIn(e.speed, e.complete)
            },
            hide: function(e) {
                e.box.stop(!0).fadeOut(e.speed, e.complete)
            }
        },
        none: {
            show: function(e) {
                e.box.hide().show(0, e.complete)
            },
            hide: function(e) {
                e.box.hide(0, e.complete)
            }
        }
    };
    e.fn.openClose = function(i) {
        return this.each(function() {
            jQuery(this).data("OpenClose", new t(e.extend(i, {
                holder: this
            })))
        })
    }
}(jQuery);

/*! responsiveCarousel.JS - v1.2.0
 * http://basilio.github.com/responsiveCarousel */
!function(e) {
    "use strict";
    e.fn.carousel = function(i) {
        var t, r;
        return t = {
            infinite: !0,
            visible: 1,
            speed: "fast",
            overflow: !1,
            autoRotate: !1,
            navigation: jQuery(this).data("navigation"),
            itemMinWidth: 0,
            itemEqualHeight: !1,
            itemMargin: 0,
            itemClassActive: "crsl-active",
            imageWideClass: "wide-image",
            carousel: !0
        },
            jQuery(this).each((function() {
                    r = jQuery(this),
                    !1 === e.isEmptyObject(i) && e.extend(t, i),
                    !1 === e.isEmptyObject(jQuery(r).data("crsl")) && e.extend(t, jQuery(r).data("crsl")),
                        t.isTouch = !(!("ontouchstart"in document.documentElement) && !navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i)),
                        r.init = function() {
                            t.total = jQuery(r).find(".crsl-item").length,
                                t.itemWidth = jQuery(r).outerWidth(),
                            null == t.visible && (t.visible = 5),
                                t.visibleDefault = t.visible,
                                t.swipeDistance = null,
                                t.swipeMinDistance = 100,
                                t.startCoords = {},
                                t.endCoords = {},
                                jQuery(r).css({
                                    width: "100%"
                                }),
                                jQuery(r).find(".crsl-item").css({
                                    position: "relative",
                                    float: "left",
                                    overflow: "hidden",
                                    height: "auto"
                                }),
                                jQuery(r).find("." + t.imageWideClass).each((function() {
                                        jQuery(this).css({
                                            display: "block",
                                            width: "100%",
                                            height: "auto"
                                        })
                                    }
                                )),
                                jQuery(r).find(".crsl-item iframe").attr({
                                    width: "100%"
                                }),
                            t.carousel && jQuery(r).find(".crsl-item:first-child").addClass(t.itemClassActive),
                            t.carousel && t.infinite && t.visible < t.total && jQuery(r).find(".crsl-item:first-child").before(jQuery(".crsl-item:last-child", r)),
                                !1 === t.overflow ? jQuery(r).css({
                                    overflow: "hidden"
                                }) : jQuery("html, body").css({
                                    "overflow-x": "hidden"
                                }),
                                jQuery(r).trigger("initCarousel", [t, r]),
                                r.testPreload(),
                                r.config(),
                                r.initRotate(),
                                r.triggerNavs()
                        }
                        ,
                        r.testPreload = function() {
                            if (jQuery(r).find("img").length > 0) {
                                var e = jQuery(r).find("img").length
                                    , i = 1;
                                jQuery(r).find("img").each((function() {
                                        r.preloadImage(this, i, e),
                                            i++
                                    }
                                ))
                            } else
                                jQuery(r).trigger("loadedCarousel", [t, r])
                        }
                        ,
                        r.preloadImage = function(e, i, a) {
                            var n = new Image
                                , s = {};
                            s.src = void 0 !== jQuery(e).attr("src") ? e.src : "",
                                s.alt = void 0 !== jQuery(e).attr("alt") ? e.alt : "",
                                jQuery(n).attr(s),
                                jQuery(n).on("load", (function() {
                                        1 === i && jQuery(r).trigger("loadingImagesCarousel", [t, r]),
                                        i === a && jQuery(r).trigger("loadedImagesCarousel", [t, r])
                                    }
                                ))
                        }
                        ,
                        r.config = function() {
                            t.itemWidth = Math.floor((jQuery(r).outerWidth() - t.itemMargin * (t.visibleDefault - 1)) / t.visibleDefault),
                                t.itemWidth <= t.itemMinWidth ? (t.visible = 1 === Math.floor((jQuery(r).outerWidth() - t.itemMargin * (t.visible - 1)) / t.itemMinWidth) ? Math.floor(jQuery(r).outerWidth() / t.itemMinWidth) : Math.floor((jQuery(r).outerWidth() - t.itemMargin) / t.itemMinWidth),
                                    t.visible = t.visible < 1 ? 1 : t.visible,
                                    t.itemWidth = 1 === t.visible ? Math.floor(jQuery(r).outerWidth()) : Math.floor((jQuery(r).outerWidth() - t.itemMargin * (t.visible - 1)) / t.visible)) : t.visible = t.visibleDefault,
                                t.carousel ? (r.wrapWidth = Math.floor((t.itemWidth + t.itemMargin) * t.total),
                                    r.wrapMargin = r.wrapMarginDefault = t.infinite && t.visible < t.total ? parseInt(-1 * (t.itemWidth + t.itemMargin), 10) : 0,
                                t.infinite && t.visible < t.total && 0 === jQuery(r).find(".crsl-item." + t.itemClassActive).index() && (jQuery(r).find(".crsl-item:first-child").before(jQuery(".crsl-item:last-child", r)),
                                    r.wrapMargin = r.wrapMarginDefault = parseInt(-1 * (t.itemWidth + t.itemMargin), 10)),
                                    jQuery(r).find(".crsl-wrap").css({
                                        width: r.wrapWidth + "px",
                                        marginLeft: r.wrapMargin
                                    })) : (r.wrapWidth = jQuery(r).outerWidth(),
                                    jQuery(r).find(".crsl-wrap").css({
                                        width: r.wrapWidth + t.itemMargin + "px"
                                    }),
                                    jQuery("#" + t.navigation).hide()),
                                jQuery(r).find(".crsl-item").css({
                                    width: t.itemWidth + "px",
                                    marginRight: t.itemMargin + "px"
                                }),
                                r.equalHeights(),
                            t.carousel && (t.visible >= t.total ? (t.autoRotate = !1,
                                jQuery("#" + t.navigation).hide()) : jQuery("#" + t.navigation).show())
                        }
                        ,
                        r.equalHeights = function() {
                            if (!1 !== t.itemEqualHeight) {
                                var e = 0;
                                jQuery(r).find(".crsl-item").each((function() {
                                        jQuery(this).css({
                                            height: "auto"
                                        }),
                                        jQuery(this).outerHeight() > e && (e = jQuery(this).outerHeight())
                                    }
                                )),
                                    jQuery(r).find(".crsl-item").css({
                                        height: e + "px"
                                    })
                            }
                            return !0
                        }
                        ,
                        r.initRotate = function() {
                            !1 !== t.autoRotate && (r.rotateTime = window.setInterval((function() {
                                    r.rotate()
                                }
                            ), t.autoRotate))
                        }
                        ,
                        r.triggerNavs = function() {
                            jQuery("#" + t.navigation).delegate(".previous, .next", "click", (function(e) {
                                    if (e.preventDefault(),
                                        r.prepareExecute(),
                                    jQuery(this).hasClass("previous") && r.testPrevious(r.itemActive))
                                        r.previous();
                                    else {
                                        if (!jQuery(this).hasClass("next") || !r.testNext())
                                            return;
                                        r.next()
                                    }
                                }
                            ))
                        }
                        ,
                        r.prepareExecute = function() {
                            return t.autoRotate && clearInterval(r.rotateTime),
                                r.preventAnimateEvent(),
                                r.itemActive = jQuery(r).find(".crsl-item." + t.itemClassActive),
                                !0
                        }
                        ,
                        r.preventAnimateEvent = function() {
                            if (jQuery(r).find(".crsl-wrap:animated").length > 0)
                                return !1
                        }
                        ,
                        r.rotate = function() {
                            return r.preventAnimateEvent(),
                                r.itemActive = jQuery(r).find(".crsl-item." + t.itemClassActive),
                                r.next(),
                                !0
                        }
                        ,
                        r.testPrevious = function(e) {
                            return jQuery(".crsl-wrap", r).find(".crsl-item").index(e) > 0
                        }
                        ,
                        r.testNext = function() {
                            return !t.infinite && r.wrapWidth >= (t.itemWidth + t.itemMargin) * (t.visible + 1) - r.wrapMargin || t.infinite
                        }
                        ,
                        r.previous = function() {
                            r.wrapMargin = t.infinite ? r.wrapMarginDefault + jQuery(r.itemActive).outerWidth(!0) : r.wrapMargin + jQuery(r.itemActive).outerWidth(!0);
                            jQuery(r.itemActive).index();
                            var e = jQuery(r.itemActive).prev(".crsl-item")
                                , i = "previous";
                            jQuery(r).trigger("beginCarousel", [t, r, i]),
                                jQuery(r).find(".crsl-wrap").animate({
                                    marginLeft: r.wrapMargin + "px"
                                }, t.speed, (function() {
                                        jQuery(r.itemActive).removeClass(t.itemClassActive),
                                            jQuery(e).addClass(t.itemClassActive),
                                            t.infinite ? jQuery(this).css({
                                                marginLeft: r.wrapMarginDefault
                                            }).find(".crsl-item:first-child").before(jQuery(".crsl-item:last-child", r)) : (!1 === r.testPrevious(e) && jQuery("#" + t.navigation).find(".previous").addClass("previous-inactive"),
                                            r.testNext() && jQuery("#" + t.navigation).find(".next").removeClass("next-inactive")),
                                            jQuery(this).trigger("endCarousel", [t, r, i])
                                    }
                                ))
                        }
                        ,
                        r.next = function() {
                            r.wrapMargin = t.infinite ? r.wrapMarginDefault - jQuery(r.itemActive).outerWidth(!0) : r.wrapMargin - jQuery(r.itemActive).outerWidth(!0);
                            jQuery(r.itemActive).index();
                            var e = jQuery(r.itemActive).next(".crsl-item")
                                , i = "next";
                            jQuery(r).trigger("beginCarousel", [t, r, i]),
                                jQuery(r).find(".crsl-wrap").animate({
                                    marginLeft: r.wrapMargin + "px"
                                }, t.speed, (function() {
                                        jQuery(r.itemActive).removeClass(t.itemClassActive),
                                            jQuery(e).addClass(t.itemClassActive),
                                            t.infinite ? jQuery(this).css({
                                                marginLeft: r.wrapMarginDefault
                                            }).find(".crsl-item:last-child").after(jQuery(".crsl-item:first-child", r)) : (r.testPrevious(e) && jQuery("#" + t.navigation).find(".previous").removeClass("previous-inactive"),
                                            !1 === r.testNext() && jQuery("#" + t.navigation).find(".next").addClass("next-inactive")),
                                            jQuery(this).trigger("endCarousel", [t, r, i])
                                    }
                                ))
                        }
                    ;
                    var a, n = !1;
                    jQuery(window).on("mouseleave", (function(e) {
                            return e.target ? a = e.target : e.srcElement && (a = e.srcElement),
                                n = !!(jQuery(r).attr("id") && jQuery(a).parents(".crsl-items").attr("id") === jQuery(r).attr("id") || jQuery(a).parents(".crsl-items").data("navigation") === jQuery(r).data("navigation")),
                                !1
                        }
                    )),
                        jQuery(window).on("keydown", (function(e) {
                                !0 === n && (37 === e.keyCode ? (r.prepareExecute(),
                                    r.previous()) : 39 === e.keyCode && (r.prepareExecute(),
                                    r.next()))
                            }
                        )),
                    t.isTouch && jQuery(r).on("touchstart", (function(e) {
                            jQuery(r).addClass("touching"),
                                t.startCoords.pageX = t.endCoords.pageX = e.originalEvent.targetTouches[0].pageX,
                                t.startCoords.pageY = t.endCoords.pageY = e.originalEvent.targetTouches[0].pageY,
                                jQuery(".touching").on("touchmove", (function(e) {
                                        t.endCoords.pageX = e.originalEvent.targetTouches[0].pageX,
                                            t.endCoords.pageY = e.originalEvent.targetTouches[0].pageY,
                                        Math.abs(parseInt(t.endCoords.pageX - t.startCoords.pageX, 10)) > Math.abs(parseInt(t.endCoords.pageY - t.startCoords.pageY, 10)) && (e.preventDefault(),
                                            e.stopPropagation())
                                    }
                                ))
                        }
                    )).on("touchend", (function(e) {
                            e.preventDefault(),
                                e.stopPropagation(),
                                t.swipeDistance = t.endCoords.pageX - t.startCoords.pageX,
                                t.swipeDistance >= t.swipeMinDistance ? (r.prepareExecute(),
                                    r.previous()) : t.swipeDistance <= -t.swipeMinDistance && (r.prepareExecute(),
                                    r.next()),
                                jQuery(".touching").off("touchmove").removeClass("touching")
                        }
                    )),
                        jQuery(r).on("loadedCarousel loadedImagesCarousel", (function() {
                                r.equalHeights()
                            }
                        )),
                        jQuery(window).on("carouselResizeEnd", (function() {
                                t.itemWidth !== jQuery(r).outerWidth() && r.config()
                            }
                        )),
                        jQuery(window).ready((function() {
                                jQuery(r).trigger("prepareCarousel", [t, r]),
                                    r.init(),
                                    jQuery(window).on("resize", (function() {
                                            this.carouselResizeTo && clearTimeout(this.carouselResizeTo),
                                                this.carouselResizeTo = setTimeout((function() {
                                                        jQuery(this).trigger("carouselResizeEnd")
                                                    }
                                                ), 10)
                                        }
                                    ))
                            }
                        )),
                        jQuery(window).on("load", (function() {
                                r.testPreload(),
                                    r.config()
                            }
                        ))
                }
            ))
    }
}(jQuery);

/*! http://mths.be/placeholder v2.0.7 by @mathias */
!function(e, a, t) {
    function l(e) {
        var a = {}
            , l = /^jQuery\d+$/;
        return t.each(e.attributes, function(e, t) {
            t.specified && !l.test(t.name) && (a[t.name] = t.value)
        }),
            a
    }
    function r(e, a) {
        var t = this
            , l = jQuery(t);
        if (t.value == l.attr("placeholder") && l.hasClass("placeholder"))
            if (l.data("placeholder-password")) {
                if (l = l.hide().next().show().attr("id", l.removeAttr("id").data("placeholder-id")),
                e === !0)
                    return l[0].value = a;
                l.focus()
            } else
                t.value = "",
                    l.removeClass("placeholder"),
                t == d() && t.select()
    }
    function o() {
        var e, a = this, o = jQuery(a), d = this.id;
        if ("" == a.value) {
            if ("password" == a.type) {
                if (!o.data("placeholder-textinput")) {
                    try {
                        e = o.clone().attr({
                            type: "text"
                        })
                    } catch (c) {
                        e = jQuery("<input>").attr(t.extend(l(this), {
                            type: "text"
                        }))
                    }
                    e.removeAttr("name").data({
                        "placeholder-password": o,
                        "placeholder-id": d
                    }).bind("focus.placeholder", r),
                        o.data({
                            "placeholder-textinput": e,
                            "placeholder-id": d
                        }).before(e)
                }
                o = o.removeAttr("id").hide().prev().attr("id", d).show()
            }
            o.addClass("placeholder"),
                o[0].value = o.attr("placeholder")
        } else
            o.removeClass("placeholder")
    }
    function d() {
        try {
            return a.activeElement
        } catch (e) {}
    }
    var c, n, u = "[object OperaMini]" == Object.prototype.toString.call(e.operamini), i = "placeholder"in a.createElement("input") && !u, p = "placeholder"in a.createElement("textarea") && !u, h = t.fn, s = t.valHooks, v = t.propHooks;
    i && p ? (n = h.placeholder = function() {
        return this
    }
        ,
        n.input = n.textarea = !0) : (n = h.placeholder = function() {
        var e = this;
        return e.filter((i ? "textarea" : ":input") + "[placeholder]").not(".placeholder").bind({
            "focus.placeholder": r,
            "blur.placeholder": o
        }).data("placeholder-enabled", !0).trigger("blur.placeholder"),
            e
    }
        ,
        n.input = i,
        n.textarea = p,
        c = {
            get: function(e) {
                var a = jQuery(e)
                    , t = a.data("placeholder-password");
                return t ? t[0].value : a.data("placeholder-enabled") && a.hasClass("placeholder") ? "" : e.value
            },
            set: function(e, a) {
                var t = jQuery(e)
                    , l = t.data("placeholder-password");
                return l ? l[0].value = a : t.data("placeholder-enabled") ? ("" == a ? (e.value = a,
                e != d() && o.call(e)) : t.hasClass("placeholder") ? r.call(e, !0, a) || (e.value = a) : e.value = a,
                    t) : e.value = a
            }
        },
    i || (s.input = c,
        v.value = c),
    p || (s.textarea = c,
        v.value = c),
        jQuery(function() {
            jQuery(a).delegate("form", "submit.placeholder", function() {
                var e = jQuery(".placeholder", this).each(r);
                setTimeout(function() {
                    e.each(o)
                }, 10)
            })
        }),
        jQuery(e).bind("beforeunload.placeholder", function() {
            jQuery(".placeholder").each(function() {
                this.value = ""
            })
        }))
}(this, document, jQuery);

/**
 * jQuery Bar Rating Plugin v1.1.4
 * Copyright (c) 2012-2016 Kazik Pietruszewski
 */
!function(e) {
    "function" == typeof define && define.amd ? define(["jquery"], e) : "object" == typeof module && module.exports ? module.exports = e(require("jquery")) : e(jQuery)
}(function(e) {
    var t = function() {
        function t() {
            var t = this
                , n = function() {
                var e = [t.options.wrapperClass];
                "" !== t.options.theme && e.push("br-theme-" + t.options.theme),
                    t.$elem.wrap(jQuery("<div />", {
                        "class": e.join(" ")
                    }))
            }
                , r = function() {
                t.$elem.unwrap()
            }
                , a = function(n) {
                return e.isNumeric(n) && (n = Math.floor(n)),
                    jQuery('option[value="' + n + '"]', t.$elem)
            }
                , i = function() {
                var e = t.options.initialRating;
                return e ? a(e) : jQuery("option:selected", t.$elem)
            }
                , o = function(e) {
                var n = t.$elem.data("barrating");
                return "undefined" != typeof e ? n[e] : n
            }
                , s = function(e, n) {
                null !== n && "object" == typeof n ? t.$elem.data("barrating", n) : t.$elem.data("barrating")[e] = n
            }
                , l = function() {
                var e = i()
                    , n = e.val()
                    , r = e.data("html") ? e.data("html") : e.text();
                s(null, {
                    userOptions: t.options,
                    ratingValue: n,
                    ratingText: r,
                    originalRatingValue: n,
                    originalRatingText: r,
                    readOnly: t.options.readonly,
                    ratingMade: !1
                })
            }
                , u = function() {
                t.$elem.removeData("barrating")
            }
                , c = function() {
                return o("ratingText")
            }
                , d = function() {
                return o("ratingValue")
            }
                , f = function() {
                var e = jQuery("<div />", {
                    "class": "br-widget"
                });
                return t.$elem.find("option").each(function() {
                    var n, r, a, i;
                    n = jQuery(this).val(),
                    n && (r = jQuery(this).text(),
                        a = jQuery(this).data("html"),
                    a && (r = a),
                        i = jQuery("<a />", {
                            href: "#",
                            "data-rating-value": n,
                            "data-rating-text": r,
                            html: t.options.showValues ? r : ""
                        }),
                        e.append(i))
                }),
                t.options.showSelectedRating && e.append(jQuery("<div />", {
                    text: "",
                    "class": "br-current-rating"
                })),
                t.options.reverse && e.addClass("br-reverse"),
                t.options.readonly && e.addClass("br-readonly"),
                    e
            }
                , g = function() {
                return o("userOptions").reverse ? "nextAll" : "prevAll"
            }
                , p = function(e) {
                a(e).prop("selected", !0),
                    t.$elem.change()
            }
                , h = function() {
                jQuery("option", t.$elem).prop("selected", function() {
                    return this.defaultSelected
                }),
                    t.$elem.change()
            }
                , b = function(e) {
                e = e ? e : c(),
                t.options.showSelectedRating && t.$elem.parent().find(".br-current-rating").text(e)
            }
                , v = function() {
                var n = t.$widget.find('a[data-rating-value="' + d() + '"]')
                    , r = o("userOptions").initialRating;
                t.$widget.find("a").removeClass("br-selected br-current br-half"),
                    n.addClass("br-selected br-current")[g()]().addClass("br-selected"),
                !o("ratingMade") && e.isNumeric(r) && e.isNumeric(d()) && r > d() && n[o("userOptions").reverse ? "prev" : "next"]().addClass("br-half")
            }
                , m = function(e) {
                return t.options.deselectable ? t.$elem.find("option:first").val() ? !1 : e.hasClass("br-current") : !1
            }
                , y = function(e) {
                e.on("click.barrating", function(n) {
                    var r, a, i = jQuery(this), l = o("userOptions");
                    return n.preventDefault(),
                        e.removeClass("br-active br-selected br-half"),
                        i.addClass("br-selected")[g()]().addClass("br-selected"),
                        r = i.attr("data-rating-value"),
                        a = i.attr("data-rating-text"),
                        m(i) ? (i.removeClass("br-selected br-current")[g()]().removeClass("br-selected br-current"),
                            r = "",
                            a = "") : (e.removeClass("br-current"),
                            i.addClass("br-current")),
                        s("ratingValue", r),
                        s("ratingText", a),
                        s("ratingMade", !0),
                        p(r),
                        b(a),
                        l.onSelect.call(t, d(), c(), n),
                        !1
                })
            }
                , $ = function(e) {
                e.on("mouseenter.barrating", function() {
                    var t = jQuery(this);
                    e.removeClass("br-active br-selected br-half"),
                        t.addClass("br-active")[g()]().addClass("br-active"),
                        b(t.attr("data-rating-text"))
                })
            }
                , w = function(e) {
                t.$widget.on("mouseleave.barrating blur.barrating", function() {
                    e.removeClass("br-active"),
                        b(),
                        v()
                })
            }
                , j = function(e) {
                e.on("touchstart.barrating", function(e) {
                    e.preventDefault(),
                        e.stopPropagation(),
                        jQuery(this).click()
                })
            }
                , C = function(e) {
                e.on("click.barrating", function(e) {
                    e.preventDefault()
                })
            }
                , x = function(e) {
                y(e),
                t.options.hoverState && ($(e),
                    w(e))
            }
                , Q = function(e) {
                e.off(".barrating")
            }
                , O = function(e) {
                $elements = t.$widget.find("a"),
                j && j($elements),
                    e ? (Q($elements),
                        C($elements)) : x($elements)
            };
            this.show = function() {
                o() || (n(),
                    l(),
                    t.$widget = f(),
                    t.$widget.insertAfter(t.$elem),
                    v(),
                    b(),
                    O(t.options.readonly),
                    t.$elem.hide())
            }
                ,
                this.readonly = function(e) {
                    "boolean" == typeof e && o("readOnly") != e && (O(e),
                        s("readOnly", e),
                        t.$widget.toggleClass("br-readonly"))
                }
                ,
                this.set = function(e) {
                    var n = o("userOptions");
                    t.$elem.find('option[value="' + e + '"]').val() && (s("ratingValue", e),
                        s("ratingText", t.$elem.find('option[value="' + e + '"]').text()),
                        s("ratingMade", !0),
                        p(d()),
                        b(c()),
                        v(),
                    n.silent || n.onSelect.call(this, d(), c()))
                }
                ,
                this.clear = function() {
                    var e = o("userOptions");
                    s("ratingValue", o("originalRatingValue")),
                        s("ratingText", o("originalRatingText")),
                        s("ratingMade", !1),
                        h(),
                        b(c()),
                        v(),
                        e.onClear.call(this, d(), c())
                }
                ,
                this.destroy = function() {
                    var e = d()
                        , n = c()
                        , a = o("userOptions");
                    Q(t.$widget.find("a")),
                        t.$widget.remove(),
                        u(),
                        r(),
                        t.$elem.show(),
                        a.onDestroy.call(this, e, n)
                }
        }
        return t.prototype.init = function(t, n) {
            return this.$elem = jQuery(n),
                this.options = e.extend({}, e.fn.barrating.defaults, t),
                this.options
        }
            ,
            t
    }();
    e.fn.barrating = function(n, r) {
        return this.each(function() {
            var a = new t;
            if (jQuery(this).is("select") || e.error("Sorry, this plugin only works with select fields."),
                a.hasOwnProperty(n)) {
                if (a.init(r, this),
                "show" === n)
                    return a.show(r);
                if (a.$elem.data("barrating"))
                    return a.$widget = jQuery(this).next(".br-widget"),
                        a[n](r)
            } else {
                if ("object" == typeof n || !n)
                    return r = n,
                        a.init(r, this),
                        a.show();
                e.error("Method " + n + " does not exist on jQuery.barrating")
            }
        })
    }
        ,
        e.fn.barrating.defaults = {
            theme: "",
            initialRating: null,
            showValues: !1,
            showSelectedRating: !0,
            deselectable: !0,
            reverse: !1,
            readonly: !1,
            fastClicks: !0,
            hoverState: !0,
            silent: !1,
            wrapperClass: "br-wrapper",
            onSelect: function(e, t, n) {},
            onClear: function(e, t) {},
            onDestroy: function(e, t) {}
        },
        e.fn.barrating.BarRating = t
});
/*  The Final Countdown for jQuery v2.0.4 (http://hilios.github.io/jQuery.countdown/) Copyright (c) 2014 Edson Hilios*/
!function(a) {
    "use strict";
    "function" == typeof define && define.amd ? define(["jquery"], a) : a(jQuery)
}(function(a) {
    "use strict";
    function b(a) {
        if (a instanceof Date)
            return a;
        if (String(a).match(g))
            return String(a).match(/^[0-9]*$/) && (a = Number(a)),
            String(a).match(/\-/) && (a = String(a).replace(/\-/g, "/")),
                new Date(a);
        throw new Error("Couldn't cast `" + a + "` to a date object.")
    }
    function c(a) {
        return function(b) {
            var c = b.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);
            if (c)
                for (var e = 0, f = c.length; f > e; ++e) {
                    var g = c[e].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/)
                        , i = new RegExp(g[0])
                        , j = g[1] || ""
                        , k = g[3] || ""
                        , l = null;
                    g = g[2],
                    h.hasOwnProperty(g) && (l = h[g],
                        l = Number(a[l])),
                    null !== l && ("!" === j && (l = d(k, l)),
                    "" === j && 10 > l && (l = "0" + l.toString()),
                        b = b.replace(i, l.toString()))
                }
            return b = b.replace(/%%/, "%")
        }
    }
    function d(a, b) {
        var c = "s"
            , d = "";
        return a && (a = a.replace(/(:|;|\s)/gi, "").split(/\,/),
            1 === a.length ? c = a[0] : (d = a[0],
                c = a[1])),
            1 === Math.abs(b) ? d : c
    }
    var e = 100
        , f = []
        , g = [];
    g.push(/^[0-9]*$/.source),
        g.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),
        g.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),
        g = new RegExp(g.join("|"));
    var h = {
        Y: "years",
        m: "months",
        w: "weeks",
        d: "days",
        D: "totalDays",
        H: "hours",
        M: "minutes",
        S: "seconds"
    }
        , i = function(b, c, d) {
        this.el = b,
            this.$el = a(b),
            this.interval = null,
            this.offset = {},
            this.instanceNumber = f.length,
            f.push(this),
            this.$el.data("countdown-instance", this.instanceNumber),
        d && (this.$el.on("update.countdown", d),
            this.$el.on("stoped.countdown", d),
            this.$el.on("finish.countdown", d)),
            this.setFinalDate(c),
            this.start()
    };
    a.extend(i.prototype, {
        start: function() {
            null !== this.interval && clearInterval(this.interval);
            var a = this;
            this.update(),
                this.interval = setInterval(function() {
                    a.update.call(a)
                }, e)
        },
        stop: function() {
            clearInterval(this.interval),
                this.interval = null,
                this.dispatchEvent("stoped")
        },
        pause: function() {
            this.stop.call(this)
        },
        resume: function() {
            this.start.call(this)
        },
        remove: function() {
            this.stop(),
                f[this.instanceNumber] = null,
                delete this.$el.data().countdownInstance
        },
        setFinalDate: function(a) {
            this.finalDate = b(a)
        },
        update: function() {
            return 0 === this.$el.closest("html").length ? void this.remove() : (this.totalSecsLeft = this.finalDate.getTime() - (new Date).getTime(),
                this.totalSecsLeft = Math.ceil(this.totalSecsLeft / 1e3),
                this.totalSecsLeft = this.totalSecsLeft < 0 ? 0 : this.totalSecsLeft,
                this.offset = {
                    seconds: this.totalSecsLeft % 60,
                    minutes: Math.floor(this.totalSecsLeft / 60) % 60,
                    hours: Math.floor(this.totalSecsLeft / 60 / 60) % 24,
                    days: Math.floor(this.totalSecsLeft / 60 / 60 / 24) % 7,
                    totalDays: Math.floor(this.totalSecsLeft / 60 / 60 / 24),
                    weeks: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 7),
                    months: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 30),
                    years: Math.floor(this.totalSecsLeft / 60 / 60 / 24 / 365)
                },
                void (0 === this.totalSecsLeft ? (this.stop(),
                    this.dispatchEvent("finish")) : this.dispatchEvent("update")))
        },
        dispatchEvent: function(b) {
            var d = a.Event(b + ".countdown");
            d.finalDate = this.finalDate,
                d.offset = a.extend({}, this.offset),
                d.strftime = c(this.offset),
                this.$el.trigger(d)
        }
    }),
        a.fn.countdown = function() {
            var b = Array.prototype.slice.call(arguments, 0);
            return this.each(function() {
                var c = a(this).data("countdown-instance");
                if (void 0 !== c) {
                    var d = f[c]
                        , e = b[0];
                    i.prototype.hasOwnProperty(e) ? d[e].apply(d, b.slice(1)) : null === String(e).match(/^[$A-Z_][0-9A-Z_$]*$/i) ? (d.setFinalDate.call(d, e),
                        d.start()) : a.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi, e))
                } else
                    new i(this,b[0],b[1])
            })
        }
});

/* notifIt */
!function(a, b) {
    if ("function" == typeof define && define.amd)
        define(b);
    else {
        var c = b(a.b);
        a.notif = c.notif,
            a.notif_dismiss = c.notif_dismiss,
            a.notif_confirm = c.notif_confirm
    }
}(this, function() {
    function a(a) {
        var c = function() {
            return e("<span>", {
                id: "notifIt_close",
                html: "&times"
            })
        }
            , d = function() {
            var a = e("<div>", {
                id: "ui_notifIt"
            })
                , b = e("<p>", {
                html: i.msg
            });
            return a.append(b),
                a
        }
            , e = jQuery
            , f = function() {
            e("#ui_notifIt").remove(),
                clearTimeout(window.notifit_timeout)
        };
        f(),
            window.notifit_timeout = null;
        var g = (window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth) / 2
            , h = ["left", "center", "right", "bottom"]
            , i = {
            type: "default",
            width: 300,
            height: 60,
            position: "right",
            autohide: 1,
            msg: "This is my default message",
            opacity: 1,
            multiline: 0,
            fade: 0,
            bgcolor: "",
            color: "",
            timeout: 5e3,
            zindex: null,
            offset: 0,
            callback: null,
            clickable: !1,
            animation: "slide"
        };
        if (e.extend(i, a),
            i.animations = {},
            i.animations.slide = {
                center: {
                    css_start: {
                        top: parseInt(0 - (i.height + 10)),
                        left: g - parseInt(i.width / 2)
                    },
                    "in": {
                        top: parseInt(10 + i.offset)
                    },
                    out: {
                        start: {
                            top: parseInt(i.height - i.height / 2)
                        },
                        end: {
                            top: parseInt(0 - 2 * i.height)
                        }
                    }
                },
                bottom: {
                    css_start: {
                        top: "auto",
                        bottom: parseInt(0 - (i.height + 10)),
                        left: g - parseInt(i.width / 2)
                    },
                    "in": {
                        bottom: parseInt(10 + i.offset)
                    },
                    out: {
                        start: {
                            bottom: parseInt(i.height - i.height / 2)
                        },
                        end: {
                            bottom: parseInt(0 - 2 * i.height)
                        }
                    }
                },
                right: {
                    css_start: {
                        right: parseInt(0 - (i.width + 10)),
                        right: parseInt(0 - 2 * i.width)
                    },
                    "in": {
                        right: parseInt(10 + i.offset)
                    },
                    out: {
                        start: {
                            right: parseFloat(i.width - .9 * i.width)
                        },
                        end: {
                            right: parseInt(0 - 2 * i.width)
                        }
                    }
                },
                left: {
                    css_start: {
                        left: parseInt(0 - (i.width + 10))
                    },
                    "in": {
                        left: parseInt(10 + i.offset)
                    },
                    out: {
                        start: {
                            left: parseFloat(i.width - .9 * i.width)
                        },
                        end: {
                            left: parseInt(0 - 2 * i.width)
                        }
                    }
                }
            },
            i.animations.zoom = {
                center: {
                    css_start: {
                        top: 10,
                        left: g - parseInt(i.width / 2),
                        zoom: .01
                    },
                    "in": {
                        zoom: 1
                    },
                    out: {
                        start: {
                            zoom: 1.3
                        },
                        end: {
                            zoom: .01
                        }
                    }
                },
                bottom: {
                    css_start: {
                        top: "auto",
                        bottom: 10,
                        left: g - parseInt(i.width / 2),
                        zoom: .01
                    },
                    "in": {
                        zoom: 1
                    },
                    out: {
                        start: {
                            zoom: 1.3
                        },
                        end: {
                            zoom: .01
                        }
                    }
                },
                right: {
                    css_start: {
                        right: 10,
                        zoom: .01
                    },
                    "in": {
                        right: parseInt(10 + i.offset),
                        zoom: 1
                    },
                    out: {
                        start: {
                            zoom: 1.3
                        },
                        end: {
                            zoom: .01
                        }
                    }
                },
                left: {
                    css_start: {
                        left: 10,
                        zoom: .01
                    },
                    "in": {
                        zoom: 1
                    },
                    out: {
                        start: {
                            zoom: 1.3
                        },
                        end: {
                            zoom: .01
                        }
                    }
                }
            },
            i.available_animations = Object.keys(i.animations),
            !i.available_animations.length)
            throw new Error("No animations");
        if (!h.length)
            throw new Error("No available positions");
        -1 === h.indexOf(i.position) && (i.position = h[0]),
        -1 === i.available_animations.indexOf(i.animation) && (i.animation = i.available_animations[0]),
        "function" != typeof i.callback && (i.callback = null),
            i.width > 0 ? i.width = i.width : "all" === i.width ? i.width = screen.width - 60 : i.width = 400,
        i.height < 100 && i.height > 0 && (height = i.height);
        var j = d();
        return i.clickable && j.append(c()),
            e("body").append(j),
        i.zindex && e("#ui_notifIt").css("z-index", i.zindex),
            i.multiline ? e("#ui_notifIt").css("padding", 15) : (e("#ui_notifIt").css("height", height),
                e("#ui_notifIt p").css("line-height", height + "px")),
            e("#ui_notifIt").css({
                width: i.width,
                opacity: i.opacity,
                "background-color": i.bgcolor,
                color: i.color
            }),
            e("#ui_notifIt").addClass(i.type),
            i.animations[i.animation][i.position].css_start ? e("#ui_notifIt").css(i.animations[i.animation][i.position].css_start) : e("#ui_notifIt").css(i.animations[i.available_animations[0]][i.position].css_start),
            e("#ui_notifIt").animate(i.animations[i.animation][i.position]["in"]),
        i.clickable || e("#ui_notifIt").click(function(a) {
            a.stopPropagation(),
                b(i)
        }),
            e("body").on("click", "#ui_notifIt #notifIt_close", function() {
                b(i)
            }),
        i.autohide && (isNaN(i.timeout) || (window.notifit_timeout = setTimeout(function() {
            b(i)
        }, i.timeout))),
            {
                destroy: f
            }
    }
    function b(a) {
        var b = jQuery;
        if (clearTimeout(window.notifit_timeout),
        "fade" != a.animation) {
            if (a.animations && a.animations[a.animation] && a.animations[a.animation][a.position] && a.animations[a.animation][a.position].out && a.animations[a.animation][a.position].out.start && a.animations[a.animation][a.position].out.end)
                animation1 = a.animations[a.animation][a.position].out.start,
                    animation2 = a.animations[a.animation][a.position].out.end;
            else {
                if (!(a.animations[a.available_animations[0]] && a.animations[a.available_animations[0]][a.position] && a.animations[a.available_animations[0]][a.position].out && a.animations[a.available_animations[0]][a.position].out.start && a.animations[a.available_animations[0]][a.position].out.end))
                    throw new Error("Invalid animation");
                animation1 = a.animations[a.available_animations[0]][a.position].out.start,
                    animation2 = a.animations[a.available_animations[0]][a.position].out.end
            }
            b("#ui_notifIt").animate(animation1, 100, function() {
                b("#ui_notifIt").animate(animation2, 100, function() {
                    b("#ui_notifIt").remove(),
                    a.callback && a.callback()
                })
            })
        } else
            b("#ui_notifIt").fadeOut("slow", function() {
                b("#ui_notifIt").remove(),
                a.callback && a.callback()
            })
    }
    function c(a) {
        function g() {
            if (null !== e)
                return e;
            var a = b("<button>", {
                "class": "notifit_confirm_accept",
                text: d.textaccept
            })
                , c = b("<button>", {
                "class": "notifit_confirm_cancel",
                text: d.textcancel
            })
                , g = b("<div>", {
                "class": "notifit_confirm_message",
                text: d.message
            });
            return e = b("<div>", {
                "class": "notifit_confirm"
            }),
                e.append(g).append(a).append(c),
                f = b("<div>", {
                    "class": "notifit_confirm_bg"
                }),
                e
        }
        function h() {
            e && (d.fullscreen ? (f.hide(),
                e.hide(),
                b("body").append(f),
                b("body").append(e),
                e.css({
                    top: f.outerHeight() / 2 - e.outerHeight() / 2,
                    left: f.outerWidth() / 2 - e.outerWidth() / 2
                }),
                f.fadeIn("fast", function() {
                    e.slideDown("fast")
                })) : (e.css({
                top: "20px",
                left: "auto",
                right: "20px",
                display: "none"
            }),
                b("body").append(e),
                e.slideDown("fast")))
        }
        function i() {
            e && e.slideUp("fast", function() {
                e.remove()
            }),
            f && f.fadeOut("fast", function() {
                f.remove()
            })
        }
        function j() {
            i();
            var a = null;
            return b(this).hasClass("notifit_confirm_accept") ? a = !0 : b(this).hasClass("notifit_confirm_cancel") && (a = !1),
                "function" == typeof d.callback ? d.callback(a) : a
        }
        function k() {
            b("html").one("click", ".notifit_confirm_accept, .notifit_confirm_cancel", j)
        }
        var b = jQuery
            , c = {
            textaccept: "Accept",
            textcancel: "Cancel",
            message: "Is that what you want to do?",
            fullscreen: !1,
            callback: null
        }
            , d = b.extend({}, c, a)
            , e = b(".notifit_confirm")[0] ? b(".notifit_confirm") : null
            , f = b(".notifit_confirm_bg")[0] ? b(".notifit_confirm_bg") : null;
        g(),
            h(),
            k()
    }
    return {
        notif: a,
        notif_dismiss: b,
        notif_confirm: c
    }
});
